pipeline{
agent any
tools{
   maven 'maven3'
}

stages{
   stage('maven build'){
    steps{
         sh "mvn clean package"
    }
   }
   stage('Upload to nexus'){
    steps{

       def pom = readMavenPom file: 'pom.xml'
      nexusArtifactUploader artifacts: 
      [[artifactId: 'myweb', classifier: '',file: "target/myweb-${pom.version}.war", type: 'war']], 
       credentialsId: 'admin', 
       groupId: 'in.javahome', 
       nexusUrl: '172.31.75.95:8081', 
       nexusVersion: 'nexus3', 
       protocol: 'http', 
       repository: 'jyothihome-snapshot', 
       version: pom.version
    }

   }
stage('dev-deploy'){
     when{
     branch "dev"
     }
     steps{
      echo "deploy to dev enironment"
       }
    }
  }
}
